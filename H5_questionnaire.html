<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <script src="js/zepto.min.js"></script>
    <script src="js/touch.js"></script>
    <link href="//cdn.bootcss.com/animate.css/3.5.2/animate.css" rel="stylesheet">
    <title>H5_questionnaire</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }

        section {
            width: 100%;
            overflow: hidden;
            text-align: center;
        }

        .mainContent {
            position: relative;
        }

        .page1 {
            background: #00bb00;
            position: relative;
        }

        .page2 {
            background: #00A4F1;
            position: relative;
        }

        .page3 {
            background: #a9c700;
            position: relative;
        }

        .page4 {
            background: #0000ff;
            position: relative;
        }

        .page5 {
            background: #f63737;
            position: relative;
        }

        .hide {
            display: none;
        }

        .show {
            display: inline-block;
        }

        .pageOut_next {
            -webkit-animation: moveOut_next .5s linear both;
            animation: moveOut_next .5s linear both;
        }

        @-webkit-keyframes moveOut_next {
            100% {
                -webkit-transform: translateY(-100%);
                opacity: 0;
                /*display: none;*/
            }
        }

        @keyframes moveOut_next {
            100% {
                transform: translateY(-100%);
                opacity: 0;
                /*display: none;*/
            }
        }

        .pageIn_next {
            -webkit-animation: moveIn_next .5s linear both;
            animation: moveIn_next .5s linear both;
        }

        @-webkit-keyframes moveIn_next {
            100% {
                -webkit-transform: translateY(100%);
                display: none;
            }
        }

        @keyframes moveIn_next {
            100% {
                transform: translateY(100%);
                display: none;
            }
        }

        .pageIn_pre{
            -webkit-animation: moveIn_pre .5s linear both;
            animation: moveIn_pre .5s linear both;
        }
        @-webkit-keyframes moveIn_pre {
            100%{
                -webkit-transform: translateY(0);
            }
        }
        @keyframes moveIn_pre {
            100%{
                transform: translateY(0);
            }
        }



        .pageOut_pre {
            -webkit-animation: moveOut_pre .5s linear both;
            animation: moveOut_pre .5s linear both;
        }

        @-webkit-keyframes moveOut_pre {
            100% {
                -webkit-transform: translateY(100%);
            }
        }

        @keyframes moveOut_pre {
            100% {
                transform: translateY(100%);
            }
        }
    </style>
</head>
<body>
<div class="mainContent">
    <section class="page1">
        <br>
        <br>
        <br>
        第一页<br>
        第一页<br>
        第一页<br>
        第一页<br>
        第一页<br>
        第一页<br>
    </section>
    <section class="page2 hide">
        <br>
        <br>
        <br>
        第二页<br>
        第二页<br>
        第二页<br>
        第二页<br>
        第二页<br>
    </section>
    <section class="page3 hide">
        <br>
        <br>
        <br>
        第三页<br>
        第三页<br>
        第三页<br>
        第三页<br>
        第三页<br>
    </section>
    <section class="page4 hide">
        <br>
        <br>
        <br>
        第四页<br>
        第四页<br>
        第四页<br>
        第四页<br>
        第四页<br>
        第四页<br>
    </section>
    <section class="page5 hide">
        <br>
        <br>
        <br>
        第五页<br>
        第五页<br>
        第五页<br>
        第五页<br>
        第五页<br>
        第五页<br>
    </section>
</div>
<script>
    var winWidth;
    var winHeight;
    var prePage = 1;
    var nowPage = 1;
    var maxPage = 5;

    //获取相关设备尺寸
    function getWindowSize() {
        //获取窗口宽度，下方用于兼容浏览器
        if (window.innerWidth) {
            winWidth = window.innerWidth;
        } else if ((document.body) && (document.body.clientWidth)) {
            winWidth = document.body.clientWidth;
        }
        //获取窗口高度，下方用于兼容浏览器
        if (window.innerHeight) {
            winHeight = window.innerHeight;
        } else if ((document.body) && (document.body.clientHeight)) {
            winHeight = document.body.clientHeight;
        }
        var page1 = document.getElementsByTagName("section");
        for (var i = 0; i < page1.length; i++) {
            page1[i].style.height = winHeight + "px";
        }
    }

    window.onload = function () {
        //绑定zepto的touchmove事件
        getWindowSize();
        swipe();
    };

    //手指划屏事件
    function swipe() {
        document.addEventListener("touchmove", function (event) {
            event.preventDefault();
        }, false);
        $(document).swipeUp(function () { //手指上划
            goPage("next");
        });
        $(document).swipeDown(function () { //手指下划
            goPage("pre");
        });
        $(document).swipeLeft(function () { //手指左划
            goPage("next");
        });
        $(document).swipeRight(function () { //手指右划
            goPage("pre");
        })
    }

    //翻页功能
    function goPage(stage) {
        if (stage == "next") { //看下页
            prePage = nowPage;
            console.log("prePage=" + prePage);
            if (nowPage == maxPage) {
                nowPage = 1;
            } else {
                nowPage++;
                console.log("nowPage=" + nowPage);
            }
            //调用切换页面时动画效果
            animationBasic_next()

        } else if (stage == "pre") { //看上页
            prePage = nowPage;
            console.log("prePage=" + prePage);
            if (nowPage == 1) {
                nowPage = maxPage;
            } else {
                nowPage--;
                console.log("nowPage=" + nowPage);
            }
            //调用切换页面时动画效果
            animationBasic_pre();
        }
    }

    //下方为无动画效果切屏函数,效果不区分上划还是下划
    function noAnimation() {
        $(".page" + prePage).addClass("hide");
        $(".page" + prePage).removeClass("show");
        $(".page" + nowPage).addClass("show");
        $(".page" + nowPage).removeClass("hide");
    }

    //下方为基本动画-上划(看下页)效果切屏函数
    function animationBasic_next() {
        $(".page" + prePage).addClass("pageOut_next");
        $(".page" + nowPage).removeClass("hide");
        setTimeout(function () {
            $(".page" + nowPage).addClass("pageIn_next");
            $(".page" + prePage).removeClass("pageOut_next");
            $(".page" + prePage).addClass("hide");
            $(".page" + nowPage).removeClass("pageIn_next");
            $(".page" + nowPage).removeClass("hide");
        }, 500);
    }

    //下方为基本动画-下划(看上页)效果切屏函数
    function animationBasic_pre() {
        $(".page" + prePage).addClass("pageOut_pre");
        setTimeout(function () {
            $(".page" + nowPage).removeClass("hide");
            $(".page" + nowPage).addClass("pageIn_pre");
            $(".page" + prePage).removeClass("pageOut_pre");
            $(".page" + prePage).addClass("hide");
            $(".page" + nowPage).removeClass("pageIn_pre");
            $(".page" + nowPage).removeClass("hide");
        }, 500);
    }

    //下方为旋转移出效果切屏函数
    function animationRotate() {
        $(".page" + prePage).addClass("animated rollOut");
        $(".page" + nowPage).removeClass("hide");
        setTimeout(function () {
            $(".page" + nowPage).addClass("animated rollIn");
            $(".page" + prePage).removeClass("animated rollOut");
            $(".page" + prePage).addClass("hide");
            $(".page" + nowPage).removeClass("animated rollIn");
            $(".page" + nowPage).removeClass("hide");
        }, 500);
    }
</script>
</body>
</html>